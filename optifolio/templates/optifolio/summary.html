{% extends 'optifolio/main.html' %}

{% load static %}
{% block content  %}
<br>
<div class="container navadj">
    <div class="container-fluid">
        <p class="text-md-left ml-1" style="font-size:36px;font-weight:bold;">Twoje portfolia</p>
    </div>
</div>
<div class="container navadj">
    <nav class="navbar navbar-expand">
        <div class="container-fluid">
            <div id="navbarResponsive">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#"><div class="przyciskportf d-flex justify-content-center align-items-center">Aktualne</div></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#"><div class="przyciskportf1 d-flex justify-content-center align-items-center">Historyczne</div></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#"><div class="przyciskportf1 d-flex justify-content-center align-items-center">Przykładowe</div></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#"><button class="przyciskportf1" data-toggle="modal" data-target="#exampleModal"><div class="d-flex justify-content-center align-items-center">Dodaj portfolio</div></button></a>
                    </li>                
                </ul>

            </div>
        </div>
    </nav>
</div>
<div class="modal fade popsum" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Dodaj portfolio</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
            
          <form action="/summary/#" method="POST">
              {% csrf_token %}
              {{ form.portfolio_title }}
              {{ form.p_shares_num_sum.as_hidden }}
              {{ form.p_last_mod_date.as_hidden }}
              {{ form.p_comp_num_sum.as_hidden }}
              {{ form.p_to_buy_percentage.as_hidden }}
              {{ form.p_profit_earned.as_hidden }}

              <button type="submit" value="Zapisz zmiany" href="{% url 'summary' %}" class="btn btn-primary">Zapisz zmiany</button>
              <h0>Info: Mozna mieć maksymalnie 3 portfolia</h0>
          </form>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Zamknij</button>
        <button type="button" class="btn btn-primary">Zapisz zmiany</button>
      </div>
    </div>
  </div>
</div>
<div class="container navadj">
{% for temp in all_user_portfolio %}

    <div class="kafelek justify-content-center align-items-center ml-4 mt-3">
        <div class="grafika"> </div>
        <div class="sumnapis d-flex justify-content-center align-items-center mt-3">{{ temp.portfolio_title }}</div>
        <div class="cztery containfer-fluid mt-3">
        <table class="d-flex justify-content-center align-items-center">
            <tr>
               <td class="p-3"> <div class="shadow"><div class="kaf d-flex justify-content-center align-items-center"><p class="dane">{{temp.p_shares_num_sum}}</p> <p class="tekstkafel">Liczba akcji</p> </div></div></td>
               <td class="p-3"> <div class="shadow"><div class="kaf d-flex justify-content-center align-items-center"><p class="dane">{{temp.p_profit_earned}}</p><p class="tekstkafel">Zysk</p> </div></td>
            </tr>
            <tr>
               <td class="p-3"> <div class="shadow"><div class="kaf d-flex justify-content-center align-items-center"><p class="dane">{{temp.p_comp_num_sum}}</p> <p class="tekstkafel">Liczba firm</p> </div></div></td>
               <td class="p-3"> <div class="shadow"><div class="kaf d-flex justify-content-center align-items-center"><p class="dane">{{temp.p_to_buy_percentage}}</p> <p class="tekstkafel"> Na buy</p> </div></div></td>
            </tr>
        </table>
        </div>
        <div class="d-flex justify-content-center align-items-center mt-3">
            <a class="navbutthead mr-4 d-flex justify-content-center align-items-center" href="{% url 'optimize' temp.portfolio_id %}">Optymalizuj</a>
            <a class="navbutt mr-4 d-flex justify-content-center align-items-center" href="{% url 'vispage' temp.portfolio_id %}">Edytuj</a>
            <a class="navbutt d-flex justify-content-center align-items-center" href="{% url 'delete_portfolio' temp.portfolio_id %}">Usuń</a>
        </div>
        <div class="summfoot d-flex justify-content-center align-items-center p-4">Ostatnia aktualizacja {{temp.p_last_mod_date}}</div>
    </div>

{% endfor %}
</div>
{% endblock %}